═══════════════════════════════════════════════════════════════
  🎮 СИСТЕМА ДВИЖЕНИЯ В СТИЛЕ LODE RUNNER 🎮
  Полное руководство по настройке и использованию
═══════════════════════════════════════════════════════════════

📦 ЧТО ВКЛЮЧЕНО:

1. PlayerController.cs - управление персонажем
2. DiggableBlock.cs - копаемые блоки
3. Ladder.cs - лестницы для лазания
4. Rope.cs - горизонтальные веревки
5. LodeRunnerProjectSetup.cs - автонастройка проекта

═══════════════════════════════════════════════════════════════

🚀 БЫСТРЫЙ СТАРТ (5 минут):

ШАГ 1: НАСТРОЙКА ПРОЕКТА
  1. В Unity: Tools → Lode Runner → Настройка проекта
  2. Нажмите "ВЫПОЛНИТЬ НАСТРОЙКУ"
  3. ✓ Слои и теги созданы автоматически!

ШАГ 2: СОЗДАНИЕ ИГРОКА
  1. Создайте 2D Sprite объект (ПКМ → 2D Object → Sprite)
  2. Назовите его "Player"
  3. Установите тег "Player"
  4. Добавьте компонент "Player Controller"
  5. Создайте пустой объект внутри Player → "GroundCheck"
  6. Позиционируйте GroundCheck у ног персонажа
  7. В PlayerController укажите GroundCheck

ШАГ 3: СОЗДАНИЕ УРОВНЯ
  1. Создайте землю (Sprite с коллайдером)
     • Слой: Ground
     • Тег: Ground
  
  2. Создайте лестницу (Sprite)
     • Добавьте компонент "Ladder"
     • Слой: Ladder
     • Тег: Ladder
  
  3. Создайте веревку (Sprite)
     • Добавьте компонент "Rope"
     • Слой: Rope
     • Тег: Rope
  
  4. Создайте копаемый блок (Sprite)
     • Добавьте компонент "Diggable Block"
     • Слой: Diggable
     • Тег: Diggable

ШАГ 4: ИГРАЙТЕ!
  • Стрелки ← → - ходьба
  • Стрелки ↑ ↓ - лазание по лестнице
  • Z - копать яму слева
  • X - копать яму справа
  • Shift + ← - копать яму слева
  • Shift + → - копать яму справа

═══════════════════════════════════════════════════════════════

⚙️ НАСТРОЙКА PLAYER CONTROLLER:

┌─────────────────────────────────────────────────────────────┐
│ СКОРОСТЬ ДВИЖЕНИЯ:                                           │
│  • Walk Speed: 5 - скорость ходьбы                          │
│  • Climb Speed: 3 - скорость лазания                        │
│  • Rope Speed: 4 - скорость на веревке                      │
│                                                              │
│ ПРОВЕРКА ЗЕМЛИ И ОБЪЕКТОВ:                                   │
│  • Ground Check - объект у ног (Transform)                  │
│  • Ground Check Radius: 0.2 - радиус проверки               │
│  • Ground Layer - слой земли                                │
│  • Ladder Layer - слой лестниц                              │
│  • Rope Layer - слой веревок                                │
│  • Diggable Layer - слой копаемых блоков                    │
│                                                              │
│ КОПАНИЕ ЯМ:                                                  │
│  • Dig Range: 1 - дальность копания                         │
│  • Dig Cooldown: 0.5 - задержка между копанием              │
│  • Hole Restore Time: 5 - время восстановления ямы          │
└─────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════

🎯 МЕХАНИКИ ДВИЖЕНИЯ:

1. ХОДЬБА (Walking):
   • Горизонтальное движение по земле
   • Применяется гравитация
   • Автоматический поворот персонажа

2. ЛАЗАНИЕ ПО ЛЕСТНИЦЕ (Climbing):
   • Движение вверх-вниз по лестнице
   • Гравитация отключается
   • Можно двигаться влево-вправо (медленнее)
   • Автоматически при нажатии ↑/↓ на лестнице

3. ВЕРЕВКА (On Rope):
   • Только горизонтальное движение
   • Гравитация отключается
   • Можно спрыгнуть вниз (↓)
   • Автоматически при касании веревки в воздухе

4. КОПАНИЕ (Digging):
   • Выкапывает блок слева/справа от персонажа
   • Только на земле
   • Блок восстанавливается через время
   • Есть кулдаун между копаниями

5. ПАДЕНИЕ (Falling):
   • Обычная гравитация
   • Может схватиться за веревку
   • Может приземлиться на землю

═══════════════════════════════════════════════════════════════

🔧 НАСТРОЙКА DIGGABLE BLOCK:

┌─────────────────────────────────────────────────────────────┐
│ НАСТРОЙКИ:                                                   │
│  • Default Restore Time: 5 - время восстановления           │
│  • Can Be Digged: ✓ - можно ли копать                      │
│                                                              │
│ ВИЗУАЛЬНЫЕ ЭФФЕКТЫ:                                          │
│  • Broken Effect - партиклы при разрушении                  │
│  • Restore Effect - партиклы при восстановлении             │
│                                                              │
│ ВОССТАНОВЛЕНИЕ:                                              │
│  • Show Restore Progress: ✓ - показывать мигание           │
│  • Warning Color: Желтый - цвет предупреждения              │
└─────────────────────────────────────────────────────────────┘

ОСОБЕННОСТИ:
  • Блок мигает за 30% до восстановления
  • Если игрок внутри блока - вытолкнет вверх
  • Можно вызвать InstantRestore() для мгновенного восстановления

═══════════════════════════════════════════════════════════════

🪜 НАСТРОЙКА LADDER (Лестницы):

СОЗДАНИЕ:
  1. Создайте Sprite с изображением лестницы
  2. Добавьте компонент "Ladder"
  3. Box Collider 2D добавится автоматически (Trigger)
  4. Установите слой "Ladder"
  5. Установите тег "Ladder"

РАЗМЕЩЕНИЕ:
  • Растяните коллайдер по всей высоте лестницы
  • Игрок начнет лазать при нажатии ↑/↓ внутри коллайдера

═══════════════════════════════════════════════════════════════

🪢 НАСТРОЙКА ROPE (Веревки):

СОЗДАНИЕ:
  1. Создайте Sprite с изображением веревки
  2. Добавьте компонент "Rope"
  3. Box Collider 2D добавится автоматически (Trigger)
  4. Установите слой "Rope"
  5. Установите тег "Rope"

РАЗМЕЩЕНИЕ:
  • Растяните коллайдер по всей длине веревки
  • Сделайте коллайдер тонким по высоте (0.3-0.5)
  • Игрок схватится за веревку при касании в воздухе

═══════════════════════════════════════════════════════════════

📋 СЛОИ И КОЛЛИЗИИ:

СЛОИ:
  • Ground (8) - земля и платформы
  • Ladder (9) - лестницы
  • Rope (10) - веревки
  • Diggable (11) - копаемые блоки

НАСТРОЙКА КОЛЛИЗИЙ:
  • Ladder не сталкивается с Ground, Rope, Diggable
  • Rope не сталкивается с Ground, Ladder, Diggable
  • Это позволяет игроку проходить сквозь них

ПРОВЕРКА:
  Tools → Lode Runner → Проверить настройки

═══════════════════════════════════════════════════════════════

🎨 ИНТЕГРАЦИЯ С АНИМАЦИЕЙ:

PlayerController использует следующие параметры Animator:

FLOAT:
  • MoveX - скорость по горизонтали (0-1)
  • MoveY - направление по вертикали (-1, 0, 1)

BOOL:
  • IsGrounded - на земле?
  • IsClimbing - лазает по лестнице?
  • IsOnRope - на веревке?

TRIGGER:
  • Dig - триггер копания

ПРИМЕР СТРУКТУРЫ ANIMATOR:
  Idle → Walking (MoveX > 0.1)
  Idle → Climbing (IsClimbing = true)
  Any State → Dig (Dig trigger)

═══════════════════════════════════════════════════════════════

💡 СОВЕТЫ И РЕКОМЕНДАЦИИ:

1. РАЗМЕЩЕНИЕ GROUNDCHECK:
   • Создайте пустой объект-ребенок у ног персонажа
   • Позиция примерно на Y = -0.5 от центра
   • Визуализируется желтым кругом в Scene

2. РАЗМЕРЫ КОЛЛАЙДЕРОВ:
   • Лестницы: ширина 0.5-1.0, высота по всей лестнице
   • Веревки: ширина по всей веревке, высота 0.3-0.5
   • Копаемые блоки: стандартный размер тайла (1x1)

3. КОПАНИЕ:
   • Dig Range = 1.0 подходит для тайлов 1x1
   • Копаемые блоки должны быть прямо рядом с игроком
   • Копать можно только вниз (под углом)

4. ВОССТАНОВЛЕНИЕ БЛОКОВ:
   • 5 секунд - хороший баланс
   • 3 секунды - для быстрой игры
   • 10 секунд - для сложных головоломок

5. СКОРОСТИ:
   • Walk Speed > Rope Speed > Climb Speed
   • Это создает естественное ощущение движения

═══════════════════════════════════════════════════════════════

🐛 ОТЛАДКА:

ПРОБЛЕМА: Игрок не лазает по лестнице
РЕШЕНИЕ:
  ✓ Проверьте слой лестницы (Ladder)
  ✓ Убедитесь, что Ladder Layer выбран в PlayerController
  ✓ Box Collider лестницы должен быть Trigger
  ✓ Нажимайте ↑/↓ внутри коллайдера лестницы

ПРОБЛЕМА: Игрок падает сквозь землю
РЕШЕНИЕ:
  ✓ Проверьте слой земли (Ground)
  ✓ Ground Layer выбран в PlayerController
  ✓ GroundCheck находится у ног персонажа
  ✓ Ground Check Radius не слишком маленький (0.2)

ПРОБЛЕМА: Не копаются блоки
РЕШЕНИЕ:
  ✓ Проверьте слой блоков (Diggable)
  ✓ Diggable Layer выбран в PlayerController
  ✓ Компонент DiggableBlock добавлен на блоки
  ✓ Can Be Digged = true
  ✓ Dig Range достаточен (1.0 для тайлов 1x1)

ПРОБЛЕМА: Игрок не держится за веревку
РЕШЕНИЕ:
  ✓ Проверьте слой веревки (Rope)
  ✓ Rope Layer выбран в PlayerController
  ✓ Box Collider веревки должен быть Trigger
  ✓ Коллайдер веревки тонкий (высота 0.3-0.5)

ВИЗУАЛЬНАЯ ОТЛАДКА:
  • В Scene View видны Gizmos:
    - Зеленый круг у ног = проверка земли
    - Желтые круги слева/справа = зоны копания
    - Синий куб = зона проверки лестницы
    - Голубой куб = зона проверки веревки

═══════════════════════════════════════════════════════════════

🎮 УПРАВЛЕНИЕ (По умолчанию):

КЛАВИАТУРА:
  ← → - ходьба влево-вправо
  ↑ ↓ - лазание по лестнице вверх-вниз
  Z - копать яму слева
  X - копать яму справа
  Shift + ← - копать яму слева
  Shift + → - копать яму справа

ИЗМЕНЕНИЕ УПРАВЛЕНИЯ:
  Откройте PlayerController.cs → метод GetInput()
  Измените клавиши по своему усмотрению

ИНТЕГРАЦИЯ NEW INPUT SYSTEM:
  В проекте есть InputSystem_Actions.inputactions
  Можно переделать GetInput() для использования Input Actions

═══════════════════════════════════════════════════════════════

📝 ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ:

ПРИМЕР 1: ПРОСТОЙ УРОВЕНЬ
  1. Создайте платформу (Ground)
  2. Добавьте лестницу к верхней платформе
  3. Поставьте игрока внизу
  4. ✓ Игрок может залезть наверх!

ПРИМЕР 2: ГОЛОВОЛОМКА С КОПАНИЕМ
  1. Создайте платформу с копаемыми блоками
  2. Поместите врага/цель за блоками
  3. Игрок копает проход и падает вниз
  4. Блоки восстанавливаются через 5 секунд
  5. ✓ Головоломка на время!

ПРИМЕР 3: ВЕРЕВКА НАД ПРОПАСТЬЮ
  1. Создайте две платформы с пропастью между ними
  2. Натяните веревку над пропастью
  3. Игрок спрыгивает и хватается за веревку
  4. Перемещается по веревке к другой стороне
  5. ✓ Классическая механика Lode Runner!

═══════════════════════════════════════════════════════════════

🔗 ДОПОЛНИТЕЛЬНЫЕ СКРИПТЫ:

Система легко расширяется:
  • Добавьте врагов (AI патрулирование)
  • Добавьте собираемые предметы (золото)
  • Добавьте ловушки (шипы, падающие блоки)
  • Добавьте телепорты
  • Добавьте движущиеся платформы

═══════════════════════════════════════════════════════════════

✅ ЧЕКЛИСТ НАСТРОЙКИ:

□ Tools → Lode Runner → Настройка проекта ✓
□ Создан Player с PlayerController ✓
□ Добавлен GroundCheck объект ✓
□ Созданы слои: Ground, Ladder, Rope, Diggable ✓
□ Созданы теги для всех объектов ✓
□ Настроены Layer Mask в PlayerController ✓
□ Создана земля (Ground) ✓
□ Создана лестница (Ladder) ✓
□ Создана веревка (Rope) ✓
□ Созданы копаемые блоки (Diggable) ✓
□ Проверено управление ✓

═══════════════════════════════════════════════════════════════

Создано для проекта RunOrDie
Версия: 1.0
Дата: 2025

