═══════════════════════════════════════════════════════════════
  🎮 НАСТРОЙКА ВЕРЕВОК (ROPE LAYER) - LODE RUNNER
═══════════════════════════════════════════════════════════════

📋 БЫСТРАЯ НАСТРОЙКА (3 ШАГА):

1️⃣ СОЗДАТЬ СЛОЙ ROPE
   • Unity → Edit → Project Settings → Tags and Layers
   • В разделе "Layers" найдите свободный слой (например, Layer 8)
   • Введите имя: "Rope" (без кавычек)
   • Закройте окно

2️⃣ АВТОМАТИЧЕСКАЯ НАСТРОЙКА
   • Unity → Lode Runner → Настройка веревок (Rope Setup)
   • Нажмите "Настроить все префабы Rope"
   • Нажмите "Найти и настроить Player в сцене"
   • Готово! ✅

3️⃣ ПРОВЕРКА
   • Выделите PlayerController в Hierarchy
   • В Inspector проверьте, что:
     - Rope Layer = "Rope" (выбран слой)
     - Rope Speed = 4
     - Center On Rope = включено
     - Rope Center Speed = 8

═══════════════════════════════════════════════════════════════

🎯 КАК РАБОТАЕТ СИСТЕМА ВЕРЕВОК:

┌─────────────────────────────────────────────────────────────┐
│  УПРАВЛЕНИЕ НА ВЕРЕВКАХ                                     │
├─────────────────────────────────────────────────────────────┤
│  🏃 В ВОЗДУХЕ:                                              │
│     Игрок автоматически зацепится за веревку,              │
│     если она находится на уровне рук                        │
│                                                             │
│  👆 НА ЗЕМЛЕ:                                               │
│     Нажмите ↑ (стрелка вверх) под веревкой                 │
│     Игрок подпрыгнет и схватится за веревку                │
│                                                             │
│  ← → ДВИЖЕНИЕ ПО ВЕРЕВКЕ:                                  │
│     Используйте стрелки влево/вправо                        │
│     Игрок будет висеть на веревке и двигаться               │
│                                                             │
│  👇 СПРЫГНУТЬ:                                              │
│     Нажмите ↓ (стрелка вниз)                               │
│     Игрок отпустит веревку и упадет вниз                   │
└─────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════

⚙️ ПАРАМЕТРЫ PLAYERCONTROLLER:

┌─────────────────────────────────────────────────────────────┐
│  ОСНОВНЫЕ ПАРАМЕТРЫ                                         │
├─────────────────────────────────────────────────────────────┤
│  Rope Speed (4)         → Скорость движения по веревке      │
│  Rope Layer            → Слой "Rope"                       │
├─────────────────────────────────────────────────────────────┤
│  ЦЕНТРИРОВАНИЕ                                              │
├─────────────────────────────────────────────────────────────┤
│  Center On Rope (✓)    → Автоматическое выравнивание       │
│  Rope Center Speed (8) → Скорость центрирования            │
├─────────────────────────────────────────────────────────────┤
│  ОПЦИОНАЛЬНЫЕ                                               │
├─────────────────────────────────────────────────────────────┤
│  Can Climb Rope (✗)    → Можно ли лазать вверх по веревке  │
│  Rope Climb Speed (2)  → Скорость лазания вверх            │
└─────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════

🔧 РУЧНАЯ НАСТРОЙКА ПРЕФАБОВ (если нужно):

1. Откройте префаб веревки в Assets/GamePrefabs/Rope/
2. Установите Layer = "Rope"
3. Добавьте BoxCollider2D (если нет):
   • Is Trigger = ✓ (включено)
   • Size X = ширина веревки
   • Size Y = 0.3-0.5 (высота для захвата)
4. Добавьте компонент Rope.cs (опционально)
5. Сохраните префаб

═══════════════════════════════════════════════════════════════

🎨 ВИЗУАЛИЗАЦИЯ В СЦЕНЕ:

Когда вы выделите PlayerController в сцене, увидите:

┌─────────────────────────────────────────────────────────────┐
│  🔵 Синий куб    → Зона проверки лестницы                  │
│  🟦 Голубой куб  → Зона проверки веревки (область рук)     │
│  🟢 Зеленый куб  → Игрок на веревке (активная зона)        │
│  🟡 Желтая сфера → Целевая высота центрирования            │
│  📏 Линия        → Направление к целевой высоте            │
└─────────────────────────────────────────────────────────────┘

═══════════════════════════════════════════════════════════════

💡 КАК РАБОТАЕТ ФИЗИКА ВЕРЕВОК:

1. ДЕТЕКТИРОВАНИЕ:
   Игрок проверяет область рук (чуть выше центра персонажа)
   на наличие объектов со слоем "Rope"

2. ЗАХВАТ:
   • В воздухе → автоматический захват
   • На земле + ↑ → подпрыгивает и захватывает

3. ВИСЕНИЕ:
   Игрок автоматически центрируется к нижнему краю веревки
   Гравитация отключается (gravityScale = 0)

4. ДВИЖЕНИЕ:
   Только горизонтальное движение ← →
   Вертикальная позиция фиксирована (центрирование)

5. ОСВОБОЖДЕНИЕ:
   При нажатии ↓ игрок отпускает веревку
   Гравитация включается обратно
   Начинается падение

═══════════════════════════════════════════════════════════════

🐛 ВОЗМОЖНЫЕ ПРОБЛЕМЫ:

❌ ИГРОК НЕ ЗАХВАТЫВАЕТ ВЕРЕВКУ:
   ✅ Проверьте, что слой "Rope" создан
   ✅ Проверьте, что префаб веревки имеет слой "Rope"
   ✅ Проверьте, что в PlayerController → Rope Layer выбран "Rope"
   ✅ Веревка должна быть на уровне рук игрока

❌ ИГРОК ПРОВАЛИВАЕТСЯ СКВОЗЬ ВЕРЕВКУ:
   ✅ Это нормально! Веревка - trigger
   ✅ Игрок должен зацепиться в воздухе или нажать ↑

❌ ИГРОК НЕ ДВИГАЕТСЯ ПО ВЕРЕВКЕ:
   ✅ Проверьте Rope Speed > 0
   ✅ Проверьте, что состояние = OnRope (в отладке GUI)

❌ ИГРОК ЗАСТРЕВАЕТ НА ВЕРЕВКЕ:
   ✅ Нажмите ↓ чтобы отпустить
   ✅ Проверьте Can Move = включено

═══════════════════════════════════════════════════════════════

📊 КОД - ЧТО БЫЛО ДОБАВЛЕНО:

В PlayerController.cs добавлено:
✅ Переменные для настройки веревок (centerOnRope, ropeCenterSpeed, etc.)
✅ Улучшенное детектирование веревки (область рук, не центр)
✅ Автоматическое центрирование по высоте веревки
✅ Возможность подпрыгнуть и схватиться за веревку с земли
✅ Опциональное лазание вверх по веревке (canClimbRope)
✅ Визуализация зоны детектирования в Gizmos

═══════════════════════════════════════════════════════════════

🎮 ПРИМЕРЫ ИСПОЛЬЗОВАНИЯ:

СЦЕНАРИЙ 1: Прыжок через яму
  • Игрок разбегается
  • Прыгает в яму
  • В воздухе автоматически хватается за веревку
  • Двигается по веревке влево/вправо
  • Отпускает веревку над безопасной платформой

СЦЕНАРИЙ 2: Подъем к веревке
  • Игрок стоит под веревкой
  • Нажимает ↑
  • Подпрыгивает и хватается
  • Двигается по веревке к цели

СЦЕНАРИЙ 3: Переход между лестницами
  • Игрок поднимается по лестнице
  • Спрыгивает в сторону
  • Хватается за веревку в воздухе
  • Двигается к другой лестнице
  • Спрыгивает на лестницу

═══════════════════════════════════════════════════════════════

📝 ЧЕКЛИСТ НАСТРОЙКИ:

☐ 1. Создан слой "Rope" в Project Settings
☐ 2. Префабы в Assets/GamePrefabs/Rope/ имеют слой "Rope"
☐ 3. Префабы имеют BoxCollider2D с Is Trigger = ✓
☐ 4. PlayerController → Rope Layer = "Rope"
☐ 5. PlayerController → Rope Speed = 4
☐ 6. PlayerController → Center On Rope = ✓
☐ 7. PlayerController → Rope Center Speed = 8
☐ 8. Протестировано: захват в воздухе работает
☐ 9. Протестировано: подпрыгивание с земли работает
☐ 10. Протестировано: движение по веревке работает
☐ 11. Протестировано: спрыгивание вниз работает

═══════════════════════════════════════════════════════════════

✨ СИСТЕМА ГОТОВА К ИСПОЛЬЗОВАНИЮ! ✨

Если у вас возникли вопросы:
1. Откройте Lode Runner → Настройка веревок (Rope Setup)
2. Там есть подробная инструкция и автоматическая настройка

Удачи в разработке! 🎮

